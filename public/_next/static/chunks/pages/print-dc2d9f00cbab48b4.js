(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[690],{2161:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/print",function(){return n(8359)}])},9008:function(e,t,n){e.exports=n(7828)},8359:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return l},default:function(){return c}});var s=n(5893),r=n(9008),a=n(7294),l=!0;function c(e){let{sections:t,sectionsWithOffsets:n,metadata:l,precomputed:c}=e,[o,d]=(0,a.useState)({}),[f,u]=(0,a.useState)({}),[h,p]=(0,a.useState)(""),[m,g]=(0,a.useState)(""),[x,y]=(0,a.useState)("");(0,a.useEffect)(()=>{p(new Date().toLocaleString());try{let e=localStorage.getItem("explanations");if(!e)return;let t=JSON.parse(e),n=Object.values(t||{}).filter(e=>e&&e.meta&&e.last),s={};for(let e of n){let t=e.meta.sectionIndex;s[t]||(s[t]=[]),s[t].push(e)}Object.keys(s).forEach(e=>{s[e].sort((e,t)=>(e.meta.start||0)-(t.meta.start||0))}),d(s)}catch(e){}try{let e=localStorage.getItem("forcedNotes"),t=[];if(e){let n=JSON.parse(e);Array.isArray(n)&&(t=n.map(String))}if(t.length&&Array.isArray(c)&&c.length){let e=Array.isArray(null==l?void 0:l.scenes)?l.scenes:[],s=t=>{for(let n of e)if(t>=n.startOffset&&t<=n.endOffset)return{act:n.act,scene:n.scene};return{act:"Prologue",scene:""}},r=Array.isArray(null==l?void 0:l.speeches)?l.speeches:[],a=new Map,i=[];for(let e of r){let{act:t,scene:n}=s(e.offset||0),r=t+"#"+n,l=a.get(r)||[],c=l.length+1,o={offset:e.offset||0,act:t,scene:n,speechIndex:c};l.push(o),a.set(r,l),i.push(o)}let o=new Map;for(let e of c){let t=e.act||e.Act||"",n=null!=e.scene?String(e.scene):"",s=t+"#"+n,r=a.get(s)||[];if(!r.length)continue;let l=Number(e.startOffset||0),c=r[0];for(let e=0;e<r.length;e++)if(l<=r[e].offset){c=r[e];break}let i="".concat(c.act,"|").concat(c.scene,"|").concat(c.speechIndex);o.has(i)||o.set(i,e)}let d=new TextEncoder,f=n.map(e=>{let t=e.startOffset||0,n=t+d.encode(e.text||"").length;return{start:t,end:n}}),h={};for(let e of t){let t=o.get(String(e));if(!t)continue;let n=Number(t.startOffset||0),s=0;for(let e=0;e<f.length;e++){let{start:t,end:r}=f[e];if(n>=t&&n<r){s=e;break}if(f[e].start<=n)s=e;else break}h[s]||(h[s]=[]),h[s].push({last:t.content||"",meta:{sectionIndex:s,byteOffset:n}})}u(h)}}catch(e){}},[]),(0,a.useEffect)(()=>{try{let e=new URLSearchParams(window.location.search),t=e.get("act")||"",n=e.get("scene")||"";t||(t=localStorage.getItem("printAct")||""),n||(n=localStorage.getItem("printScene")||""),t=(t||"").toString().trim().toUpperCase(),n=(n||"").toString().trim().toUpperCase(),g(t),y(n)}catch(e){}},[]),(0,a.useEffect)(()=>{try{let e=new URL(window.location.href);m?e.searchParams.set("act",m):e.searchParams.delete("act"),x?e.searchParams.set("scene",x):e.searchParams.delete("scene"),window.history.replaceState(null,"",e.toString())}catch(e){}},[m,x]);let v=(0,a.useMemo)(()=>{let e=n.map(()=>({act:null,scene:null,title:null}));if(!(null==l?void 0:l.scenes))return e;for(let t=0;t<n.length;t++){let s=n[t].startOffset,r=(l.scenes||[]).find(e=>s>=e.startOffset&&s<=e.endOffset);r&&(e[t]={act:r.act||null,scene:r.scene||null,title:r.title||null})}return e},[n,l]),j=(0,a.useMemo)(()=>{let e=new Set;return((null==l?void 0:l.scenes)||[]).forEach(t=>{t.act&&e.add(t.act)}),Array.from(e).sort((e,t)=>i(e)-i(t))},[l]),S=(0,a.useMemo)(()=>{if(!m)return[];let e=new Set;return((null==l?void 0:l.scenes)||[]).forEach(t=>{t.act===m&&t.scene&&e.add(t.scene)}),Array.from(e).sort((e,t)=>i(e)-i(t))},[l,m]),w=(0,a.useMemo)(()=>n.map((e,t)=>t).filter(e=>{let t=v[e];return(!m||t.act===m)&&(!x||t.scene===x)}),[n,v,m,x,o]),N="Romeo and Juliet â€” Explanations";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r,{children:(0,s.jsx)("title",{children:N})}),(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("div",{className:"screenOnly",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"0.75rem",gap:"1rem"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontWeight:700},children:N}),(0,s.jsxs)("div",{style:{marginTop:"0.5rem",display:"flex",gap:"0.5rem",alignItems:"center",flexWrap:"wrap"},children:[(0,s.jsxs)("label",{children:["Act:",(0,s.jsxs)("select",{value:m,onChange:e=>{g(e.target.value),y("")},style:{marginLeft:6},children:[(0,s.jsx)("option",{value:"",children:"All"}),j.map(e=>(0,s.jsxs)("option",{value:e,children:[" ",e," "]},"a-".concat(e)))]})]}),(0,s.jsxs)("label",{children:["Scene:",(0,s.jsxs)("select",{value:x,onChange:e=>y(e.target.value),style:{marginLeft:6},disabled:!m,children:[(0,s.jsx)("option",{value:"",children:"All"}),S.map(e=>(0,s.jsxs)("option",{value:e,children:[" ",e," "]},"s-".concat(m,"-").concat(e)))]})]})]})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,s.jsx)("a",{href:"/",title:"Back to app",children:"Back"}),(0,s.jsx)("button",{onClick:()=>window.print(),children:"Print"})]})]}),(0,s.jsxs)("div",{className:"printHeader",children:[(0,s.jsx)("div",{className:"printHeaderTitle",children:N}),(0,s.jsx)("div",{className:"printHeaderDate",children:h})]}),w.map(e=>(0,s.jsxs)("div",{className:"section",children:[(0,s.jsx)("div",{className:"playText",children:(0,s.jsx)("pre",{children:t[e]})}),Array.isArray(o[e])&&o[e].length>0||Array.isArray(f[e])&&f[e].length>0?(0,s.jsx)("aside",{className:"explanations","aria-label":"Explanations",children:(0,s.jsx)("div",{children:[...f[e]||[],...o[e]||[]].map((e,t)=>{var n;return(0,s.jsxs)("div",{style:{marginBottom:"0.75rem",paddingBottom:"0.5rem",borderBottom:"1px solid #eee"},children:[(0,s.jsx)("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:"Explanation"}),(0,s.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:(null==e?void 0:e.last)||""})]},"p-".concat(t,"-").concat((null==e?void 0:null===(n=e.meta)||void 0===n?void 0:n.byteOffset)||t))})})}):null]},e)),(0,s.jsx)("div",{className:"printFooter",children:(0,s.jsx)("span",{className:"pageNumber"})})]})]})}function i(e){let t={I:1,V:5,X:10,L:50,C:100,D:500,M:1e3},n=0,s=0;for(let r=e.length-1;r>=0;r--){let a=t[e[r]]||0;a<s?n-=a:n+=a,s=a}return n}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2161)}),_N_E=e.O()}]);