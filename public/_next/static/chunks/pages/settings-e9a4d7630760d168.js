(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{8356:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return n(8402)}])},9008:function(e,t,n){e.exports=n(7828)},8022:function(e,t,n){"use strict";function i(e){let t="https://romeo-and-juliet-explained.vercel.app",n=e.startsWith("/")?e:"/".concat(e);if(!t)return n;let i=t.endsWith("/")?t.slice(0,-1):t;return"".concat(i).concat(n)}n.d(t,{k:function(){return i}})},8402:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var i=n(5893),l=n(9008),s=n(1664),a=n(7294),o=n(8022);let r=e=>Math.min(1.6,Math.max(.7,e)),d=e=>{"undefined"!=typeof document&&document.documentElement.style.setProperty("--font-scale",e.toFixed(3))};function c(){let[e,t]=(0,a.useState)({model:"gpt-4o-mini",language:"English",educationLevel:"High school",age:"16",provider:"openai",length:"brief"}),[n,c]=(0,a.useState)([]),[h,u]=(0,a.useState)(!1),[p,m]=(0,a.useState)(1),[g,v]=(0,a.useState)(!1);function x(e){if(n&&n.length)return n[0];let t=(e||"openai").toLowerCase();return"anthropic"===t?"claude-3-sonnet-20240229":"deepseek"===t?"deepseek-chat":"gemini"===t?"gemini-1.5-pro-latest":"gpt-4o-mini"}(0,a.useEffect)(()=>{try{let e=localStorage.getItem("llmOptions");if(e){let n=JSON.parse(e),i=(n.provider||"openai").toLowerCase(),l=n.model||"",s=l;if("deepseek"!==i||/deepseek/i.test(l)?"openai"!==i||/^gpt-/i.test(l)?"anthropic"!==i||/^claude/i.test(l)?"gemini"!==i||/^gemini/i.test(l)||(s="gemini-1.5-pro-latest"):s="claude-3-sonnet-20240229":s="gpt-4o-mini":s="deepseek-chat",s!==l){n.model=s;try{localStorage.setItem("llmOptions",JSON.stringify(n))}catch(e){}}t(n)}let n=localStorage.getItem("fontScale");if(null!==n&&""!==n){let e=parseFloat(n);if(Number.isFinite(e)){let t=r(e);m(t),d(t)}}u(!0)}catch(e){u(!0)}},[]),(0,a.useEffect)(()=>{let e=e=>{var t;let n=null==e?void 0:null===(t=e.detail)||void 0===t?void 0:t.value,i="number"==typeof n?n:parseFloat(n);Number.isFinite(i)&&m(r(i))};return window.addEventListener("font-scale-updated",e),()=>window.removeEventListener("font-scale-updated",e)},[]),(0,a.useEffect)(()=>{if(!h)return;let n=(e.provider||"openai").toLowerCase();fetch((0,o.k)("/api/models?provider=".concat(encodeURIComponent(n)))).then(e=>e.json()).then(e=>{let i=Array.isArray(null==e?void 0:e.models)&&e.models.length?e.models:[];c(i),i.length>0&&t(e=>{if((e.provider||"openai").toLowerCase()!==n)return e;if(!("deepseek"===n&&/deepseek/i.test(e.model)||"openai"===n&&/^gpt-/i.test(e.model)||"anthropic"===n&&/^claude/i.test(e.model)||"gemini"===n&&/^gemini/i.test(e.model))&&!i.includes(e.model)){let t=i[0],n={...e,model:t};try{localStorage.setItem("llmOptions",JSON.stringify(n))}catch(e){}return n}return e})}).catch(()=>c([]))},[e.provider,h]);let f=(n,i)=>{let l={...e,[n]:i};if("provider"===n){let e=(i||"openai").toLowerCase();"deepseek"===e?l.model="deepseek-chat":"anthropic"===e?l.model="claude-3-sonnet-20240229":"gemini"===e?l.model="gemini-1.5-pro-latest":l.model="gpt-4o-mini"}t(l);try{localStorage.setItem("llmOptions",JSON.stringify(l))}catch(e){}},j=e=>{let t=r(e);m(t),d(t);try{localStorage.setItem("fontScale",String(t))}catch(e){}window.dispatchEvent(new CustomEvent("font-scale-set",{detail:{value:t}}))};return(0,i.jsxs)("div",{className:"settings-page",children:[(0,i.jsxs)(l,{children:[(0,i.jsx)("title",{children:"Settings — Romeo and Juliet Explained"}),(0,i.jsx)("meta",{name:"description",content:"Configure your AI provider, model, language preferences, and other settings for Romeo and Juliet Explained."})]}),(0,i.jsxs)("div",{className:"settings-content",children:[(0,i.jsx)("div",{className:"page-header",children:(0,i.jsxs)(s,{href:"/",className:"back-button",children:[(0,i.jsx)("span",{className:"icon",children:"←"}),"Back to Play"]})}),(0,i.jsx)("h1",{className:"settings-title",children:"Settings"}),(0,i.jsxs)("div",{className:"settings-section",children:[(0,i.jsx)("h2",{children:"AI Provider & Model"}),(0,i.jsx)("p",{children:"Choose your preferred AI provider and model for generating explanations."}),(0,i.jsxs)("div",{className:"settings-form",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"provider",children:"Provider"}),(0,i.jsxs)("select",{id:"provider",value:e.provider||"openai",onChange:e=>f("provider",e.target.value),children:[(0,i.jsx)("option",{value:"openai",children:"OpenAI"}),(0,i.jsx)("option",{value:"anthropic",children:"Anthropic"}),(0,i.jsx)("option",{value:"deepseek",children:"DeepSeek"}),(0,i.jsx)("option",{value:"gemini",children:"Gemini"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"model",children:"Model"}),(0,i.jsx)("select",{id:"model",value:n.includes(e.model)?e.model:x(e.provider),onChange:e=>f("model",e.target.value),children:(n.length?n:[x(e.provider)]).map(e=>(0,i.jsx)("option",{value:e,children:e},e))})]})]})]}),(0,i.jsxs)("div",{className:"settings-section",children:[(0,i.jsx)("h2",{children:"Explanation Preferences"}),(0,i.jsx)("p",{children:"Customize how explanations are generated and displayed."}),(0,i.jsxs)("div",{className:"settings-form",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"language",children:"Language"}),(0,i.jsx)("input",{id:"language",type:"text",value:e.language||"",onChange:e=>f("language",e.target.value),placeholder:"English"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"length",children:"Default Length"}),(0,i.jsxs)("select",{id:"length",value:e.length||"brief",onChange:e=>f("length",e.target.value),children:[(0,i.jsx)("option",{value:"brief",children:"Brief"}),(0,i.jsx)("option",{value:"medium",children:"Medium"}),(0,i.jsx)("option",{value:"large",children:"Large"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"educationLevel",children:"Education Level"}),(0,i.jsxs)("select",{id:"educationLevel",value:e.educationLevel||"High school",onChange:e=>f("educationLevel",e.target.value),children:[(0,i.jsx)("option",{value:"Middle school",children:"Middle school"}),(0,i.jsx)("option",{value:"High school",children:"High school"}),(0,i.jsx)("option",{value:"Undergraduate",children:"Undergraduate"}),(0,i.jsx)("option",{value:"Graduate",children:"Graduate"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"age",children:"Age"}),(0,i.jsx)("input",{id:"age",type:"number",min:"10",max:"100",value:e.age||"",onChange:e=>f("age",e.target.value)})]})]})]}),(0,i.jsxs)("div",{className:"settings-section",children:[(0,i.jsx)("h2",{children:"Font Size"}),(0,i.jsx)("p",{children:"Adjust the size of the play text and explanations. You can also pinch on touch devices to resize instantly."}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("label",{htmlFor:"fontScale",children:["Font size: ",(0,i.jsxs)("strong",{children:[Math.round(100*p),"%"]})]}),(0,i.jsx)("input",{id:"fontScale",type:"range",min:"0.7",max:"1.5",step:"0.05",value:p,onChange:e=>{let t=parseFloat(e.target.value);Number.isFinite(t)&&j(t)},style:{width:"100%"}}),(0,i.jsx)("div",{className:"button-group",style:{marginTop:"0.5rem",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[.85,1,1.15,1.3].map(e=>{let t="".concat(Math.round(100*e),"%"),n=.01>Math.abs(p-e);return(0,i.jsx)("button",{type:"button",onClick:()=>j(e),className:n?"active":void 0,children:t},t)})})]})]}),(0,i.jsxs)("div",{className:"settings-section",children:[(0,i.jsx)("h2",{children:"Data Management"}),(0,i.jsx)("p",{children:"Manage your saved explanations and notes."}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("button",{type:"button",onClick:()=>{v(!0)},className:"danger-button",children:"Remove All Explanations"}),g&&(0,i.jsxs)("div",{className:"confirmation-panel",children:[(0,i.jsx)("p",{children:"Remove all saved explanations? This cannot be undone."}),(0,i.jsxs)("div",{className:"button-group",children:[(0,i.jsx)("button",{type:"button",onClick:()=>{try{localStorage.setItem("explanations",JSON.stringify({})),localStorage.setItem("forcedNotes",JSON.stringify([])),localStorage.setItem("noteThreshold","100"),window.dispatchEvent(new CustomEvent("note-threshold-set",{detail:{threshold:100,density:0}})),window.dispatchEvent(new CustomEvent("note-threshold-updated",{detail:{threshold:100,density:0}})),v(!1)}catch(e){}},className:"danger-button",children:"Yes, remove all"}),(0,i.jsx)("button",{type:"button",onClick:()=>v(!1),children:"Cancel"})]})]}),(0,i.jsx)("p",{className:"help-text",children:"This will remove all saved explanations and reset notes."})]})]})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8356)}),_N_E=e.O()}]);