(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{1118:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(7984)}])},6691:function(e,t){"use strict";var n,r,a,l;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{ACTION_FAST_REFRESH:function(){return d},ACTION_NAVIGATE:function(){return o},ACTION_PREFETCH:function(){return u},ACTION_REFRESH:function(){return s},ACTION_RESTORE:function(){return i},ACTION_SERVER_ACTION:function(){return f},ACTION_SERVER_PATCH:function(){return c},PrefetchCacheEntryStatus:function(){return r},PrefetchKind:function(){return n},isThenable:function(){return h}});let s="refresh",o="navigate",i="restore",c="server-patch",u="prefetch",d="fast-refresh",f="server-action";function h(e){return e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(a=n||(n={})).AUTO="auto",a.FULL="full",a.TEMPORARY="temporary",(l=r||(r={})).fresh="fresh",l.reusable="reusable",l.expired="expired",l.stale="stale",("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4318:function(e,t,n){"use strict";function r(e,t,n,r){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return r}}),n(8364),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return j}});let r=n(8754),a=n(5893),l=r._(n(7294)),s=n(1401),o=n(2045),i=n(7420),c=n(7201),u=n(1443),d=n(9953),f=n(5320),h=n(2905),p=n(4318),m=n(953),v=n(6691),y=new Set;function b(e,t,n,r,a,l){if(l||(0,o.isLocalURL)(t)){if(!r.bypassPrefetchedCheck){let a=t+"%"+n+"%"+(void 0!==r.locale?r.locale:"locale"in e?e.locale:void 0);if(y.has(a))return;y.add(a)}(async()=>l?e.prefetch(t,a):e.prefetch(t,n,r))().catch(e=>{})}}function x(e){return"string"==typeof e?e:(0,i.formatUrl)(e)}let j=l.default.forwardRef(function(e,t){let n,r;let{href:i,as:y,children:j,prefetch:g=null,passHref:E,replace:N,shallow:w,scroll:C,locale:k,onClick:_,onMouseEnter:S,onTouchStart:M,legacyBehavior:P=!1,...R}=e;n=j,P&&("string"==typeof n||"number"==typeof n)&&(n=(0,a.jsx)("a",{children:n}));let I=l.default.useContext(d.RouterContext),L=l.default.useContext(f.AppRouterContext),O=null!=I?I:L,T=!I,D=!1!==g,A=null===g?v.PrefetchKind.AUTO:v.PrefetchKind.FULL,{href:F,as:U}=l.default.useMemo(()=>{if(!I){let e=x(i);return{href:e,as:y?x(y):e}}let[e,t]=(0,s.resolveHref)(I,i,!0);return{href:e,as:y?(0,s.resolveHref)(I,y):t||e}},[I,i,y]),H=l.default.useRef(F),z=l.default.useRef(U);P&&(r=l.default.Children.only(n));let K=P?r&&"object"==typeof r&&r.ref:t,[q,B,V]=(0,h.useIntersection)({rootMargin:"200px"}),W=l.default.useCallback(e=>{(z.current!==U||H.current!==F)&&(V(),z.current=U,H.current=F),q(e),K&&("function"==typeof K?K(e):"object"==typeof K&&(K.current=e))},[U,K,F,V,q]);l.default.useEffect(()=>{O&&B&&D&&b(O,F,U,{locale:k},{kind:A},T)},[U,F,B,k,D,null==I?void 0:I.locale,O,T,A]);let G={ref:W,onClick(e){P||"function"!=typeof _||_(e),P&&r.props&&"function"==typeof r.props.onClick&&r.props.onClick(e),O&&!e.defaultPrevented&&function(e,t,n,r,a,s,i,c,u){let{nodeName:d}=e.currentTarget;if("A"===d.toUpperCase()&&(function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!u&&!(0,o.isLocalURL)(n)))return;e.preventDefault();let f=()=>{let e=null==i||i;"beforePopState"in t?t[a?"replace":"push"](n,r,{shallow:s,locale:c,scroll:e}):t[a?"replace":"push"](r||n,{scroll:e})};u?l.default.startTransition(f):f()}(e,O,F,U,N,w,C,k,T)},onMouseEnter(e){P||"function"!=typeof S||S(e),P&&r.props&&"function"==typeof r.props.onMouseEnter&&r.props.onMouseEnter(e),O&&(D||!T)&&b(O,F,U,{locale:k,priority:!0,bypassPrefetchedCheck:!0},{kind:A},T)},onTouchStart:function(e){P||"function"!=typeof M||M(e),P&&r.props&&"function"==typeof r.props.onTouchStart&&r.props.onTouchStart(e),O&&(D||!T)&&b(O,F,U,{locale:k,priority:!0,bypassPrefetchedCheck:!0},{kind:A},T)}};if((0,c.isAbsoluteUrl)(U))G.href=U;else if(!P||E||"a"===r.type&&!("href"in r.props)){let e=void 0!==k?k:null==I?void 0:I.locale,t=(null==I?void 0:I.isLocaleDomain)&&(0,p.getDomainLocale)(U,e,null==I?void 0:I.locales,null==I?void 0:I.domainLocales);G.href=t||(0,m.addBasePath)((0,u.addLocale)(U,e,null==I?void 0:I.defaultLocale))}return P?l.default.cloneElement(r,G):(0,a.jsx)("a",{...R,...G,children:n})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2905:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return i}});let r=n(7294),a=n(3815),l="function"==typeof IntersectionObserver,s=new Map,o=[];function i(e){let{rootRef:t,rootMargin:n,disabled:i}=e,c=i||!l,[u,d]=(0,r.useState)(!1),f=(0,r.useRef)(null),h=(0,r.useCallback)(e=>{f.current=e},[]);return(0,r.useEffect)(()=>{if(l){if(c||u)return;let e=f.current;if(e&&e.tagName)return function(e,t,n){let{id:r,observer:a,elements:l}=function(e){let t;let n={root:e.root||null,margin:e.rootMargin||""},r=o.find(e=>e.root===n.root&&e.margin===n.margin);if(r&&(t=s.get(r)))return t;let a=new Map;return t={id:n,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=a.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)})},e),elements:a},o.push(n),s.set(n,t),t}(n);return l.set(e,t),a.observe(e),function(){if(l.delete(e),a.unobserve(e),0===l.size){a.disconnect(),s.delete(r);let e=o.findIndex(e=>e.root===r.root&&e.margin===r.margin);e>-1&&o.splice(e,1)}}}(e,e=>e&&d(e),{root:null==t?void 0:t.current,rootMargin:n})}else if(!u){let e=(0,a.requestIdleCallback)(()=>d(!0));return()=>(0,a.cancelIdleCallback)(e)}},[c,n,t,u,f.current]),[h,u,(0,r.useCallback)(()=>{d(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9311:function(){},1664:function(e,t,n){e.exports=n(9577)},1163:function(e,t,n){e.exports=n(9090)},7984:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(5893),a=n(7294),l=n(1664),s=n(1163);function o(e){let{Component:t,pageProps:n}=e,o=(0,s.useRouter)(),c=o&&"/print"===o.pathname,u=o&&"/"===o.pathname,d=a.useRef(null),[f,h]=a.useState(!1),[p,m]=a.useState(!1);return a.useEffect(()=>{let e=()=>{m(window.innerWidth<=820)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),a.useEffect(()=>{if("undefined"==typeof document)return;let e=document.documentElement;if(e)return c?e.classList.add("isPrintRoute"):e.classList.remove("isPrintRoute"),()=>{e.classList.remove("isPrintRoute")}},[c]),a.useEffect(()=>{let e=null,t=!1,n=()=>{t||(t=!0,e=requestAnimationFrame(()=>{if(t=!1,!d.current)return;let e=d.current.offsetHeight||0;"undefined"!=typeof document&&document.documentElement.style.setProperty("--mobile-header-h","".concat(e,"px"))}))};requestAnimationFrame(()=>{if(d.current){let e=d.current.offsetHeight||0;"undefined"!=typeof document&&document.documentElement.style.setProperty("--mobile-header-h","".concat(e,"px"))}});{let t=null,r=()=>{t&&clearTimeout(t),t=setTimeout(n,100)};window.addEventListener("resize",r,{passive:!0});let a=null;return"undefined"!=typeof ResizeObserver&&d.current&&(a=new ResizeObserver(()=>n())).observe(d.current),()=>{e&&cancelAnimationFrame(e),t&&clearTimeout(t),window.removeEventListener("resize",r),a&&a.disconnect()}}},[]),(0,r.jsxs)(r.Fragment,{children:[!c&&(0,r.jsx)("header",{className:"appHeader",children:(0,r.jsxs)("div",{className:"appHeaderInner",ref:d,children:[(0,r.jsx)(l,{href:"/",className:"appTitle",style:{fontFamily:"IM Fell English, serif",fontWeight:700,whiteSpace:"nowrap",color:"inherit",textDecoration:"none",cursor:"pointer"},children:"Romeo and Juliet — Explained"}),(0,r.jsxs)("div",{className:"headerRight",children:[(0,r.jsxs)("nav",{className:"headerLinks",children:[u&&(0,r.jsxs)("a",{href:"#",className:"lnk-print",onClick:e=>{e.preventDefault();try{let e=localStorage.getItem("printAct")||"",t=localStorage.getItem("printScene")||"",n="/print",r=[];e&&r.push("act=".concat(encodeURIComponent(e))),t&&r.push("scene=".concat(encodeURIComponent(t))),r.length&&(n+="?".concat(r.join("&"))),location.pathname!==n?location.assign(n):location.href=n}catch(e){location.assign("/print")}},children:[(0,r.jsx)("span",{className:"icon","aria-hidden":!0,children:"\uD83D\uDDA8️"}),(0,r.jsx)("span",{className:"lbl",children:"Print"})]}),(0,r.jsxs)(l,{href:"/user-guide",className:"lnk-guide",children:[(0,r.jsx)("span",{className:"icon","aria-hidden":!0,children:"\uD83D\uDCD6"}),(0,r.jsx)("span",{className:"lbl",children:"User Guide"})]}),(0,r.jsxs)(l,{href:"/about",className:"lnk-about",children:[(0,r.jsx)("span",{className:"icon","aria-hidden":!0,children:"ℹ️"}),(0,r.jsx)("span",{className:"lbl",children:"About"})]}),p?(0,r.jsxs)("a",{href:"#",className:"lnk-settings",onClick:e=>{e.preventDefault(),h(!f)},children:[(0,r.jsx)("span",{className:"icon","aria-hidden":!0,children:"⚙️"}),(0,r.jsx)("span",{className:"lbl",children:"Settings"})]}):(0,r.jsxs)(l,{href:"/settings",className:"lnk-settings",children:[(0,r.jsx)("span",{className:"icon","aria-hidden":!0,children:"⚙️"}),(0,r.jsx)("span",{className:"lbl",children:"Settings"})]}),u&&p&&(0,r.jsxs)("a",{href:"#",className:"lnk-toc",onClick:e=>{e.preventDefault(),window.dispatchEvent(new Event("toggle-toc"))},children:[(0,r.jsx)("span",{className:"icon","aria-hidden":!0,children:"\uD83D\uDCD1"}),(0,r.jsx)("span",{className:"lbl",children:"Contents"})]})]}),u&&(0,r.jsx)(v,{}),u&&(0,r.jsx)(i,{})]})]})}),f&&(0,r.jsx)("div",{className:"mobileMenu",role:"dialog","aria-label":"Menu",onClick:()=>h(!1),children:(0,r.jsxs)("div",{className:"panel",onClick:e=>e.stopPropagation(),children:[u&&(0,r.jsx)("a",{className:"menuItem",href:"#",onClick:()=>{h(!1);try{let e=localStorage.getItem("printAct")||"",t=localStorage.getItem("printScene")||"",n="/print",r=[];e&&r.push("act=".concat(encodeURIComponent(e))),t&&r.push("scene=".concat(encodeURIComponent(t))),r.length&&(n+="?".concat(r.join("&"))),location.assign(n)}catch(e){location.assign("/print")}},children:"\uD83D\uDDA8️ Print"}),(0,r.jsx)(l,{className:"menuItem",href:"/user-guide",onClick:()=>h(!1),children:"\uD83D\uDCD6 User Guide"}),(0,r.jsx)(l,{className:"menuItem",href:"/about",onClick:()=>h(!1),children:"ℹ️ About"}),(0,r.jsx)(l,{className:"menuItem",href:"/settings",onClick:()=>h(!1),children:"⚙️ Settings"})]})}),(0,r.jsx)(t,{...n})]})}function i(){let[e,t]=a.useState(""),[n,l]=a.useState("Search the play…"),[s,o]=a.useState(!1),[i,c]=a.useState(0),[u,d]=a.useState(0);a.useEffect(()=>{let e=e=>{let{count:t=0,index:n=0,submitted:r=!1}=e.detail||{};c(t),d(n),o(r)};return window.addEventListener("search-state",e),()=>{window.removeEventListener("search-state",e)}},[]),a.useEffect(()=>{let e=()=>{l(420>=(window.innerWidth||0)?"Search…":"Search the play…")};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let f=()=>{o(!0),window.dispatchEvent(new CustomEvent("search-submit",{detail:{query:e}}))};return(0,r.jsxs)("form",{className:"searchBar headerSearchBar",role:"search",onSubmit:e=>{e.preventDefault(),f()},children:[(0,r.jsx)("input",{type:"search",placeholder:n,value:e,onChange:e=>{let n=e.target.value;t(n),""===n&&(o(!1),window.dispatchEvent(new CustomEvent("search-submit",{detail:{query:""}})))},"aria-label":"Search text"}),(0,r.jsx)("button",{type:"button",onClick:()=>window.dispatchEvent(new Event("search-prev")),"aria-label":"Previous result",disabled:!i,title:"Previous",style:{marginLeft:6},children:"◀"}),(0,r.jsx)("button",{type:"button",onClick:()=>window.dispatchEvent(new Event("search-next")),"aria-label":"Next result",disabled:!i,title:"Next",style:{marginLeft:4},children:"▶"}),i>0?(0,r.jsx)("span",{className:"searchCount","aria-live":"polite",children:"".concat(u," / ").concat(i)}):s?(0,r.jsx)("span",{className:"searchCount","aria-live":"polite",children:"No results"}):null]})}n(9311);let c=[{key:"none",label:"None",value:0},{key:"some",label:"Some",value:33},{key:"most",label:"Most",value:66},{key:"all",label:"All",value:100}],u=e=>Math.min(100,Math.max(0,e)),d=e=>Math.min(100,Math.max(0,100-e)),f=e=>Math.min(100,Math.max(0,100-e)),h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:66,t=u(e),n=c[0];for(let e of c)Math.abs(e.value-t)<Math.abs(n.value-t)&&(n=e);return n.key},p=(e,t,n,r)=>{let a=r*Math.PI/180;return{x:e+n*Math.cos(a),y:t+n*Math.sin(a)}},m=e=>{let{density:t,size:n=26}=e,a=u(t),l=n/2,s=n/2,o=n/2-2,i=a/100*360,c=null;if(a>=100)c=(0,r.jsx)("circle",{cx:l,cy:s,r:o,fill:"#c08a5c"});else if(a>0){let e=p(l,s,o,-90+i),t=p(l,s,o,-90),n=["M ".concat(l," ").concat(s),"L ".concat(t.x," ").concat(t.y),"A ".concat(o," ").concat(o," 0 ").concat(i>180?1:0," 1 ").concat(e.x," ").concat(e.y),"Z"].join(" ");c=(0,r.jsx)("path",{d:n,fill:"#c08a5c"})}return(0,r.jsxs)("svg",{className:"densityIcon",width:n,height:n,viewBox:"0 0 ".concat(n," ").concat(n),"aria-hidden":"true",children:[(0,r.jsx)("circle",{cx:l,cy:s,r:o,fill:"#fdf6eb",stroke:"#6b5f53",strokeWidth:"2"}),c]})};function v(){let e=a.useMemo(()=>f(33),[]),[t,n]=a.useState(e),[l,s]=a.useState(e),[o,i]=a.useState(!1),p=a.useRef(null),v=a.useRef(null),y=a.useRef(!1);a.useEffect(()=>{try{let e=window.localStorage.getItem("noteThreshold");if(null!==e&&""!==e){let t=parseInt(e,10);if(Number.isFinite(t)){let e=f(t);n(e),s(e),v.current=e}}}catch(e){}},[]),a.useEffect(()=>{let e=e=>{let t=(null==e?void 0:e.detail)||{};if(y.current)return;let r=null;"number"==typeof t.density&&Number.isFinite(t.density)?r=u(t.density):"number"==typeof t.threshold&&Number.isFinite(t.threshold)?r=f(t.threshold):"number"==typeof t.value&&Number.isFinite(t.value)&&(r=f(t.value)),null!=r&&(v.current=r,n(r),s(r))};return window.addEventListener("note-threshold-updated",e),()=>window.removeEventListener("note-threshold-updated",e)},[]),a.useEffect(()=>{if(!o)return()=>{};let e=e=>{p.current&&(p.current.contains(e.target)||i(!1))},t=e=>{"Escape"===e.key&&i(!1)};return"undefined"!=typeof document?(document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e),document.removeEventListener("keydown",t)}):()=>{}},[o]),a.useEffect(()=>{o&&s(t)},[o,t]);let b=a.useCallback(e=>{let t=u(e);if(v.current===t)return t;v.current=t;let n=d(t);try{window.localStorage.setItem("noteThreshold",String(n))}catch(e){}return window.dispatchEvent(new CustomEvent("note-threshold-set",{detail:{threshold:n,density:t}})),t},[]),x=a.useCallback(e=>{let t=u(e);s(e=>e===t?e:t),b(t),y.current||n(e=>e===t?e:t)},[b]),j=a.useCallback(function(e){let{close:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=u(e);s(r),n(e=>e===r?e:r),b(r),t&&i(!1)},[b]),g=a.useCallback(()=>{y.current=!0},[]),E=a.useCallback(()=>{y.current&&(y.current=!1,j(l))},[j,l]),N=h(t),w=c.find(e=>e.key===N)||c[2];return(0,r.jsxs)("div",{className:"headerNotesDensity",ref:p,children:[(0,r.jsxs)("button",{type:"button",className:"headerNotesButton","aria-haspopup":"dialog","aria-expanded":o,onClick:()=>i(e=>!e),title:"Adjust note density",children:[(0,r.jsx)(m,{density:t}),(0,r.jsxs)("span",{className:"sr-only",children:["Note density (",w.label,")"]})]}),o?(0,r.jsxs)("div",{className:"headerNotesPopover",role:"dialog","aria-label":"Note density selector",children:[(0,r.jsx)("div",{className:"headerNotesOptions",children:c.map(e=>{let t=e.key===N;return(0,r.jsxs)("button",{type:"button",className:"headerNotesOption".concat(t?" active":""),"aria-pressed":t,onClick:()=>{y.current=!1,j(e.value,{close:!0})},children:[(0,r.jsx)(m,{density:e.value}),(0,r.jsx)("span",{children:e.label})]},e.key)})}),(0,r.jsxs)("div",{className:"headerNotesSlider",children:[(0,r.jsx)("label",{htmlFor:"header-note-density",children:"Note density"}),(0,r.jsx)("input",{id:"header-note-density",type:"range",min:"0",max:"100",value:l,onPointerDown:g,onPointerUp:E,onMouseDown:g,onMouseUp:E,onTouchStart:g,onTouchEnd:E,onChange:e=>{let t=parseInt(e.target.value,10);Number.isFinite(t)&&x(t)},onKeyUp:e=>{("Enter"===e.key||" "===e.key||"Spacebar"===e.key)&&E()}}),(0,r.jsxs)("div",{className:"headerNotesSliderValue",children:[Math.round(l),"%"]})]})]}):null]})}}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(1118),t(9090)}),_N_E=e.O()}]);